{"ast":null,"code":"import _noop from \"lodash/noop\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n/* eslint-disable no-param-reassign */\n/**\n * @author Kuitos\n * @since 2019-04-11\n */\nvar rawAddEventListener = window.addEventListener;\nvar rawRemoveEventListener = window.removeEventListener;\nexport default function patch(global) {\n  var listenerMap = new Map();\n  global.addEventListener = function (type, listener, options) {\n    var listeners = listenerMap.get(type) || [];\n    listenerMap.set(type, [].concat(_toConsumableArray(listeners), [listener]));\n    return rawAddEventListener.call(window, type, listener, options);\n  };\n  global.removeEventListener = function (type, listener, options) {\n    var storedTypeListeners = listenerMap.get(type);\n    if (storedTypeListeners && storedTypeListeners.length && storedTypeListeners.indexOf(listener) !== -1) {\n      storedTypeListeners.splice(storedTypeListeners.indexOf(listener), 1);\n    }\n    return rawRemoveEventListener.call(window, type, listener, options);\n  };\n  return function free() {\n    listenerMap.forEach(function (listeners, type) {\n      return _toConsumableArray(listeners).forEach(function (listener) {\n        return global.removeEventListener(type, listener);\n      });\n    });\n    global.addEventListener = rawAddEventListener;\n    global.removeEventListener = rawRemoveEventListener;\n    return _noop;\n  };\n}","map":{"version":3,"names":["_noop","_toConsumableArray","rawAddEventListener","window","addEventListener","rawRemoveEventListener","removeEventListener","patch","global","listenerMap","Map","type","listener","options","listeners","get","set","concat","call","storedTypeListeners","length","indexOf","splice","free","forEach"],"sources":["/home/lishu/桌面/Micro_frontend_practice/qiankun_micro/qiankun-base/node_modules/qiankun/es/sandbox/patchers/windowListener.js"],"sourcesContent":["import _noop from \"lodash/noop\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n/* eslint-disable no-param-reassign */\n/**\n * @author Kuitos\n * @since 2019-04-11\n */\nvar rawAddEventListener = window.addEventListener;\nvar rawRemoveEventListener = window.removeEventListener;\nexport default function patch(global) {\n  var listenerMap = new Map();\n  global.addEventListener = function (type, listener, options) {\n    var listeners = listenerMap.get(type) || [];\n    listenerMap.set(type, [].concat(_toConsumableArray(listeners), [listener]));\n    return rawAddEventListener.call(window, type, listener, options);\n  };\n  global.removeEventListener = function (type, listener, options) {\n    var storedTypeListeners = listenerMap.get(type);\n    if (storedTypeListeners && storedTypeListeners.length && storedTypeListeners.indexOf(listener) !== -1) {\n      storedTypeListeners.splice(storedTypeListeners.indexOf(listener), 1);\n    }\n    return rawRemoveEventListener.call(window, type, listener, options);\n  };\n  return function free() {\n    listenerMap.forEach(function (listeners, type) {\n      return _toConsumableArray(listeners).forEach(function (listener) {\n        return global.removeEventListener(type, listener);\n      });\n    });\n    global.addEventListener = rawAddEventListener;\n    global.removeEventListener = rawRemoveEventListener;\n    return _noop;\n  };\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,aAAa;AAC/B,OAAOC,kBAAkB,MAAM,8CAA8C;AAC7E;AACA;AACA;AACA;AACA;AACA,IAAIC,mBAAmB,GAAGC,MAAM,CAACC,gBAAgB;AACjD,IAAIC,sBAAsB,GAAGF,MAAM,CAACG,mBAAmB;AACvD,eAAe,SAASC,KAAKA,CAACC,MAAM,EAAE;EACpC,IAAIC,WAAW,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC3BF,MAAM,CAACJ,gBAAgB,GAAG,UAAUO,IAAI,EAAEC,QAAQ,EAAEC,OAAO,EAAE;IAC3D,IAAIC,SAAS,GAAGL,WAAW,CAACM,GAAG,CAACJ,IAAI,CAAC,IAAI,EAAE;IAC3CF,WAAW,CAACO,GAAG,CAACL,IAAI,EAAE,EAAE,CAACM,MAAM,CAAChB,kBAAkB,CAACa,SAAS,CAAC,EAAE,CAACF,QAAQ,CAAC,CAAC,CAAC;IAC3E,OAAOV,mBAAmB,CAACgB,IAAI,CAACf,MAAM,EAAEQ,IAAI,EAAEC,QAAQ,EAAEC,OAAO,CAAC;EAClE,CAAC;EACDL,MAAM,CAACF,mBAAmB,GAAG,UAAUK,IAAI,EAAEC,QAAQ,EAAEC,OAAO,EAAE;IAC9D,IAAIM,mBAAmB,GAAGV,WAAW,CAACM,GAAG,CAACJ,IAAI,CAAC;IAC/C,IAAIQ,mBAAmB,IAAIA,mBAAmB,CAACC,MAAM,IAAID,mBAAmB,CAACE,OAAO,CAACT,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;MACrGO,mBAAmB,CAACG,MAAM,CAACH,mBAAmB,CAACE,OAAO,CAACT,QAAQ,CAAC,EAAE,CAAC,CAAC;IACtE;IACA,OAAOP,sBAAsB,CAACa,IAAI,CAACf,MAAM,EAAEQ,IAAI,EAAEC,QAAQ,EAAEC,OAAO,CAAC;EACrE,CAAC;EACD,OAAO,SAASU,IAAIA,CAAA,EAAG;IACrBd,WAAW,CAACe,OAAO,CAAC,UAAUV,SAAS,EAAEH,IAAI,EAAE;MAC7C,OAAOV,kBAAkB,CAACa,SAAS,CAAC,CAACU,OAAO,CAAC,UAAUZ,QAAQ,EAAE;QAC/D,OAAOJ,MAAM,CAACF,mBAAmB,CAACK,IAAI,EAAEC,QAAQ,CAAC;MACnD,CAAC,CAAC;IACJ,CAAC,CAAC;IACFJ,MAAM,CAACJ,gBAAgB,GAAGF,mBAAmB;IAC7CM,MAAM,CAACF,mBAAmB,GAAGD,sBAAsB;IACnD,OAAOL,KAAK;EACd,CAAC;AACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}