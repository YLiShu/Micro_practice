{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n/**\n * @author Kuitos\n * @homepage https://github.com/kuitos/\n * @since 2018-09-03 15:04\n */\nimport { getInlineCode, isModuleScriptSupported, parseUrl } from './utils';\nvar ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nvar SCRIPT_TAG_REGEX = /<(script)\\s+((?!type=('|\")text\\/ng\\x2Dtemplate\\3)[\\s\\S])*?>[\\s\\S]*?<\\/\\1>/i;\nvar SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nvar SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nvar SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nvar SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nvar SCRIPT_CROSSORIGIN_REGEX = /.*\\scrossorigin=('|\")?use-credentials\\1/;\nvar SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nvar SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nvar LINK_TAG_REGEX = /<(link)\\s+[\\s\\S]*?>/ig;\nvar LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch)\\1/;\nvar LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nvar LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nvar STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nvar STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nvar STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nvar HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nvar LINK_IGNORE_REGEX = /<link(\\s+|\\s+[\\s\\S]+\\s+)ignore(\\s*|\\s+[\\s\\S]*|=[\\s\\S]*)>/i;\nvar STYLE_IGNORE_REGEX = /<style(\\s+|\\s+[\\s\\S]+\\s+)ignore(\\s*|\\s+[\\s\\S]*|=[\\s\\S]*)>/i;\nvar SCRIPT_IGNORE_REGEX = /<script(\\s+|\\s+[\\s\\S]+\\s+)ignore(\\s*|\\s+[\\s\\S]*|=[\\s\\S]*)>/i;\nfunction hasProtocol(url) {\n  return url.startsWith('http://') || url.startsWith('https://');\n}\nfunction getEntirePath(path, baseURI) {\n  return new URL(path, baseURI).toString();\n}\nfunction isValidJavaScriptType(type) {\n  var handleTypes = ['text/javascript', 'module', 'application/javascript', 'text/ecmascript', 'application/ecmascript'];\n  return !type || handleTypes.indexOf(type) !== -1;\n}\nexport var genLinkReplaceSymbol = function genLinkReplaceSymbol(linkHref) {\n  var preloadOrPrefetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return \"<!-- \".concat(preloadOrPrefetch ? 'prefetch/preload' : '', \" link \").concat(linkHref, \" replaced by import-html-entry -->\");\n};\nexport var genScriptReplaceSymbol = function genScriptReplaceSymbol(scriptSrc) {\n  var async = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var crossOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return \"<!-- \".concat(crossOrigin ? 'cors' : '', \" \").concat(async ? 'async' : '', \" script \").concat(scriptSrc, \" replaced by import-html-entry -->\");\n};\nexport var inlineScriptReplaceSymbol = \"<!-- inline scripts replaced by import-html-entry -->\";\nexport var genIgnoreAssetReplaceSymbol = function genIgnoreAssetReplaceSymbol(url) {\n  return \"<!-- ignore asset \".concat(url || 'file', \" replaced by import-html-entry -->\");\n};\nexport var genModuleScriptReplaceSymbol = function genModuleScriptReplaceSymbol(scriptSrc, moduleSupport) {\n  return \"<!-- \".concat(moduleSupport ? 'nomodule' : 'module', \" script \").concat(scriptSrc, \" ignored by import-html-entry -->\");\n};\n\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @param postProcessTemplate\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\nexport default function processTpl(tpl, baseURI, postProcessTemplate) {\n  var scripts = [];\n  var styles = [];\n  var entry = null;\n  var moduleSupport = isModuleScriptSupported();\n  var template = tpl\n\n  /*\n  remove html comment first\n  */.replace(HTML_COMMENT_REGEX, '').replace(LINK_TAG_REGEX, function (match) {\n    /*\n    change the css link\n    */\n    var styleType = !!match.match(STYLE_TYPE_REGEX);\n    if (styleType) {\n      var styleHref = match.match(STYLE_HREF_REGEX);\n      var styleIgnore = match.match(LINK_IGNORE_REGEX);\n      if (styleHref) {\n        var href = styleHref && styleHref[2];\n        var newHref = href;\n        if (href && !hasProtocol(href)) {\n          newHref = getEntirePath(href, baseURI);\n        }\n        if (styleIgnore) {\n          return genIgnoreAssetReplaceSymbol(newHref);\n        }\n        newHref = parseUrl(newHref);\n        styles.push(newHref);\n        return genLinkReplaceSymbol(newHref);\n      }\n    }\n    var preloadOrPrefetchType = match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n    if (preloadOrPrefetchType) {\n      var _match$match = match.match(LINK_HREF_REGEX),\n        _match$match2 = _slicedToArray(_match$match, 3),\n        linkHref = _match$match2[2];\n      return genLinkReplaceSymbol(linkHref, true);\n    }\n    return match;\n  }).replace(STYLE_TAG_REGEX, function (match) {\n    if (STYLE_IGNORE_REGEX.test(match)) {\n      return genIgnoreAssetReplaceSymbol('style file');\n    }\n    return match;\n  }).replace(ALL_SCRIPT_REGEX, function (match, scriptTag) {\n    var scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n    var moduleScriptIgnore = moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX) || !moduleSupport && !!scriptTag.match(SCRIPT_MODULE_REGEX);\n    // in order to keep the exec order of all javascripts\n\n    var matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n    var matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n    if (!isValidJavaScriptType(matchedScriptType)) {\n      return match;\n    }\n\n    // if it is a external script\n    if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n      /*\n      collect scripts and replace the ref\n      */\n\n      var matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n      var matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n      var matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n      if (entry && matchedScriptEntry) {\n        throw new SyntaxError('You should not set multiply entry script!');\n      }\n      if (matchedScriptSrc) {\n        // append the domain while the script not have a protocol prefix\n        if (!hasProtocol(matchedScriptSrc)) {\n          matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n        }\n        matchedScriptSrc = parseUrl(matchedScriptSrc);\n      }\n      entry = entry || matchedScriptEntry && matchedScriptSrc;\n      if (scriptIgnore) {\n        return genIgnoreAssetReplaceSymbol(matchedScriptSrc || 'js file');\n      }\n      if (moduleScriptIgnore) {\n        return genModuleScriptReplaceSymbol(matchedScriptSrc || 'js file', moduleSupport);\n      }\n      if (matchedScriptSrc) {\n        var asyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n        var crossOriginScript = !!scriptTag.match(SCRIPT_CROSSORIGIN_REGEX);\n        scripts.push(asyncScript || crossOriginScript ? {\n          async: asyncScript,\n          src: matchedScriptSrc,\n          crossOrigin: crossOriginScript\n        } : matchedScriptSrc);\n        return genScriptReplaceSymbol(matchedScriptSrc, asyncScript, crossOriginScript);\n      }\n      return match;\n    } else {\n      if (scriptIgnore) {\n        return genIgnoreAssetReplaceSymbol('js file');\n      }\n      if (moduleScriptIgnore) {\n        return genModuleScriptReplaceSymbol('js file', moduleSupport);\n      }\n\n      // if it is an inline script\n      var code = getInlineCode(match);\n\n      // remove script blocks when all of these lines are comments.\n      var isPureCommentBlock = code.split(/[\\r\\n]+/).every(function (line) {\n        return !line.trim() || line.trim().startsWith('//');\n      });\n      if (!isPureCommentBlock) {\n        scripts.push(match);\n      }\n      return inlineScriptReplaceSymbol;\n    }\n  });\n  scripts = scripts.filter(function (script) {\n    // filter empty script\n    return !!script;\n  });\n  var tplResult = {\n    template: template,\n    scripts: scripts,\n    styles: styles,\n    // set the last script as entry if have not set\n    entry: entry || scripts[scripts.length - 1]\n  };\n  if (typeof postProcessTemplate === 'function') {\n    tplResult = postProcessTemplate(tplResult);\n  }\n  return tplResult;\n}","map":{"version":3,"names":["_slicedToArray","getInlineCode","isModuleScriptSupported","parseUrl","ALL_SCRIPT_REGEX","SCRIPT_TAG_REGEX","SCRIPT_SRC_REGEX","SCRIPT_TYPE_REGEX","SCRIPT_ENTRY_REGEX","SCRIPT_ASYNC_REGEX","SCRIPT_CROSSORIGIN_REGEX","SCRIPT_NO_MODULE_REGEX","SCRIPT_MODULE_REGEX","LINK_TAG_REGEX","LINK_PRELOAD_OR_PREFETCH_REGEX","LINK_HREF_REGEX","LINK_AS_FONT","STYLE_TAG_REGEX","STYLE_TYPE_REGEX","STYLE_HREF_REGEX","HTML_COMMENT_REGEX","LINK_IGNORE_REGEX","STYLE_IGNORE_REGEX","SCRIPT_IGNORE_REGEX","hasProtocol","url","startsWith","getEntirePath","path","baseURI","URL","toString","isValidJavaScriptType","type","handleTypes","indexOf","genLinkReplaceSymbol","linkHref","preloadOrPrefetch","arguments","length","undefined","concat","genScriptReplaceSymbol","scriptSrc","async","crossOrigin","inlineScriptReplaceSymbol","genIgnoreAssetReplaceSymbol","genModuleScriptReplaceSymbol","moduleSupport","processTpl","tpl","postProcessTemplate","scripts","styles","entry","template","replace","match","styleType","styleHref","styleIgnore","href","newHref","push","preloadOrPrefetchType","_match$match","_match$match2","test","scriptTag","scriptIgnore","moduleScriptIgnore","matchedScriptTypeMatch","matchedScriptType","matchedScriptEntry","matchedScriptSrcMatch","matchedScriptSrc","SyntaxError","asyncScript","crossOriginScript","src","code","isPureCommentBlock","split","every","line","trim","filter","script","tplResult"],"sources":["/home/lishu/桌面/Micro_frontend_practice/qiankun_micro/qiankun-base/node_modules/import-html-entry/esm/process-tpl.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n/**\n * @author Kuitos\n * @homepage https://github.com/kuitos/\n * @since 2018-09-03 15:04\n */\nimport { getInlineCode, isModuleScriptSupported, parseUrl } from './utils';\nvar ALL_SCRIPT_REGEX = /(<script[\\s\\S]*?>)[\\s\\S]*?<\\/script>/gi;\nvar SCRIPT_TAG_REGEX = /<(script)\\s+((?!type=('|\")text\\/ng\\x2Dtemplate\\3)[\\s\\S])*?>[\\s\\S]*?<\\/\\1>/i;\nvar SCRIPT_SRC_REGEX = /.*\\ssrc=('|\")?([^>'\"\\s]+)/;\nvar SCRIPT_TYPE_REGEX = /.*\\stype=('|\")?([^>'\"\\s]+)/;\nvar SCRIPT_ENTRY_REGEX = /.*\\sentry\\s*.*/;\nvar SCRIPT_ASYNC_REGEX = /.*\\sasync\\s*.*/;\nvar SCRIPT_CROSSORIGIN_REGEX = /.*\\scrossorigin=('|\")?use-credentials\\1/;\nvar SCRIPT_NO_MODULE_REGEX = /.*\\snomodule\\s*.*/;\nvar SCRIPT_MODULE_REGEX = /.*\\stype=('|\")?module('|\")?\\s*.*/;\nvar LINK_TAG_REGEX = /<(link)\\s+[\\s\\S]*?>/ig;\nvar LINK_PRELOAD_OR_PREFETCH_REGEX = /\\srel=('|\")?(preload|prefetch)\\1/;\nvar LINK_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nvar LINK_AS_FONT = /.*\\sas=('|\")?font\\1.*/;\nvar STYLE_TAG_REGEX = /<style[^>]*>[\\s\\S]*?<\\/style>/gi;\nvar STYLE_TYPE_REGEX = /\\s+rel=('|\")?stylesheet\\1.*/;\nvar STYLE_HREF_REGEX = /.*\\shref=('|\")?([^>'\"\\s]+)/;\nvar HTML_COMMENT_REGEX = /<!--([\\s\\S]*?)-->/g;\nvar LINK_IGNORE_REGEX = /<link(\\s+|\\s+[\\s\\S]+\\s+)ignore(\\s*|\\s+[\\s\\S]*|=[\\s\\S]*)>/i;\nvar STYLE_IGNORE_REGEX = /<style(\\s+|\\s+[\\s\\S]+\\s+)ignore(\\s*|\\s+[\\s\\S]*|=[\\s\\S]*)>/i;\nvar SCRIPT_IGNORE_REGEX = /<script(\\s+|\\s+[\\s\\S]+\\s+)ignore(\\s*|\\s+[\\s\\S]*|=[\\s\\S]*)>/i;\nfunction hasProtocol(url) {\n  return url.startsWith('http://') || url.startsWith('https://');\n}\nfunction getEntirePath(path, baseURI) {\n  return new URL(path, baseURI).toString();\n}\nfunction isValidJavaScriptType(type) {\n  var handleTypes = ['text/javascript', 'module', 'application/javascript', 'text/ecmascript', 'application/ecmascript'];\n  return !type || handleTypes.indexOf(type) !== -1;\n}\nexport var genLinkReplaceSymbol = function genLinkReplaceSymbol(linkHref) {\n  var preloadOrPrefetch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return \"<!-- \".concat(preloadOrPrefetch ? 'prefetch/preload' : '', \" link \").concat(linkHref, \" replaced by import-html-entry -->\");\n};\nexport var genScriptReplaceSymbol = function genScriptReplaceSymbol(scriptSrc) {\n  var async = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var crossOrigin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return \"<!-- \".concat(crossOrigin ? 'cors' : '', \" \").concat(async ? 'async' : '', \" script \").concat(scriptSrc, \" replaced by import-html-entry -->\");\n};\nexport var inlineScriptReplaceSymbol = \"<!-- inline scripts replaced by import-html-entry -->\";\nexport var genIgnoreAssetReplaceSymbol = function genIgnoreAssetReplaceSymbol(url) {\n  return \"<!-- ignore asset \".concat(url || 'file', \" replaced by import-html-entry -->\");\n};\nexport var genModuleScriptReplaceSymbol = function genModuleScriptReplaceSymbol(scriptSrc, moduleSupport) {\n  return \"<!-- \".concat(moduleSupport ? 'nomodule' : 'module', \" script \").concat(scriptSrc, \" ignored by import-html-entry -->\");\n};\n\n/**\n * parse the script link from the template\n * 1. collect stylesheets\n * 2. use global eval to evaluate the inline scripts\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function#Difference_between_Function_constructor_and_function_declaration\n *    see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#Do_not_ever_use_eval!\n * @param tpl\n * @param baseURI\n * @param postProcessTemplate\n * @stripStyles whether to strip the css links\n * @returns {{template: void | string | *, scripts: *[], entry: *}}\n */\nexport default function processTpl(tpl, baseURI, postProcessTemplate) {\n  var scripts = [];\n  var styles = [];\n  var entry = null;\n  var moduleSupport = isModuleScriptSupported();\n  var template = tpl\n\n  /*\n  remove html comment first\n  */.replace(HTML_COMMENT_REGEX, '').replace(LINK_TAG_REGEX, function (match) {\n    /*\n    change the css link\n    */\n    var styleType = !!match.match(STYLE_TYPE_REGEX);\n    if (styleType) {\n      var styleHref = match.match(STYLE_HREF_REGEX);\n      var styleIgnore = match.match(LINK_IGNORE_REGEX);\n      if (styleHref) {\n        var href = styleHref && styleHref[2];\n        var newHref = href;\n        if (href && !hasProtocol(href)) {\n          newHref = getEntirePath(href, baseURI);\n        }\n        if (styleIgnore) {\n          return genIgnoreAssetReplaceSymbol(newHref);\n        }\n        newHref = parseUrl(newHref);\n        styles.push(newHref);\n        return genLinkReplaceSymbol(newHref);\n      }\n    }\n    var preloadOrPrefetchType = match.match(LINK_PRELOAD_OR_PREFETCH_REGEX) && match.match(LINK_HREF_REGEX) && !match.match(LINK_AS_FONT);\n    if (preloadOrPrefetchType) {\n      var _match$match = match.match(LINK_HREF_REGEX),\n        _match$match2 = _slicedToArray(_match$match, 3),\n        linkHref = _match$match2[2];\n      return genLinkReplaceSymbol(linkHref, true);\n    }\n    return match;\n  }).replace(STYLE_TAG_REGEX, function (match) {\n    if (STYLE_IGNORE_REGEX.test(match)) {\n      return genIgnoreAssetReplaceSymbol('style file');\n    }\n    return match;\n  }).replace(ALL_SCRIPT_REGEX, function (match, scriptTag) {\n    var scriptIgnore = scriptTag.match(SCRIPT_IGNORE_REGEX);\n    var moduleScriptIgnore = moduleSupport && !!scriptTag.match(SCRIPT_NO_MODULE_REGEX) || !moduleSupport && !!scriptTag.match(SCRIPT_MODULE_REGEX);\n    // in order to keep the exec order of all javascripts\n\n    var matchedScriptTypeMatch = scriptTag.match(SCRIPT_TYPE_REGEX);\n    var matchedScriptType = matchedScriptTypeMatch && matchedScriptTypeMatch[2];\n    if (!isValidJavaScriptType(matchedScriptType)) {\n      return match;\n    }\n\n    // if it is a external script\n    if (SCRIPT_TAG_REGEX.test(match) && scriptTag.match(SCRIPT_SRC_REGEX)) {\n      /*\n      collect scripts and replace the ref\n      */\n\n      var matchedScriptEntry = scriptTag.match(SCRIPT_ENTRY_REGEX);\n      var matchedScriptSrcMatch = scriptTag.match(SCRIPT_SRC_REGEX);\n      var matchedScriptSrc = matchedScriptSrcMatch && matchedScriptSrcMatch[2];\n      if (entry && matchedScriptEntry) {\n        throw new SyntaxError('You should not set multiply entry script!');\n      }\n      if (matchedScriptSrc) {\n        // append the domain while the script not have a protocol prefix\n        if (!hasProtocol(matchedScriptSrc)) {\n          matchedScriptSrc = getEntirePath(matchedScriptSrc, baseURI);\n        }\n        matchedScriptSrc = parseUrl(matchedScriptSrc);\n      }\n      entry = entry || matchedScriptEntry && matchedScriptSrc;\n      if (scriptIgnore) {\n        return genIgnoreAssetReplaceSymbol(matchedScriptSrc || 'js file');\n      }\n      if (moduleScriptIgnore) {\n        return genModuleScriptReplaceSymbol(matchedScriptSrc || 'js file', moduleSupport);\n      }\n      if (matchedScriptSrc) {\n        var asyncScript = !!scriptTag.match(SCRIPT_ASYNC_REGEX);\n        var crossOriginScript = !!scriptTag.match(SCRIPT_CROSSORIGIN_REGEX);\n        scripts.push(asyncScript || crossOriginScript ? {\n          async: asyncScript,\n          src: matchedScriptSrc,\n          crossOrigin: crossOriginScript\n        } : matchedScriptSrc);\n        return genScriptReplaceSymbol(matchedScriptSrc, asyncScript, crossOriginScript);\n      }\n      return match;\n    } else {\n      if (scriptIgnore) {\n        return genIgnoreAssetReplaceSymbol('js file');\n      }\n      if (moduleScriptIgnore) {\n        return genModuleScriptReplaceSymbol('js file', moduleSupport);\n      }\n\n      // if it is an inline script\n      var code = getInlineCode(match);\n\n      // remove script blocks when all of these lines are comments.\n      var isPureCommentBlock = code.split(/[\\r\\n]+/).every(function (line) {\n        return !line.trim() || line.trim().startsWith('//');\n      });\n      if (!isPureCommentBlock) {\n        scripts.push(match);\n      }\n      return inlineScriptReplaceSymbol;\n    }\n  });\n  scripts = scripts.filter(function (script) {\n    // filter empty script\n    return !!script;\n  });\n  var tplResult = {\n    template: template,\n    scripts: scripts,\n    styles: styles,\n    // set the last script as entry if have not set\n    entry: entry || scripts[scripts.length - 1]\n  };\n  if (typeof postProcessTemplate === 'function') {\n    tplResult = postProcessTemplate(tplResult);\n  }\n  return tplResult;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}