{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n/**\n * @author Kuitos\n * @since 2019-04-11\n */\nimport { SandBoxType } from '../../interfaces';\nimport * as css from './css';\nimport { patchLooseSandbox, patchStrictSandbox } from './dynamicAppend';\nimport patchHistoryListener from './historyListener';\nimport patchInterval from './interval';\nimport patchWindowListener from './windowListener';\nexport function patchAtMounting(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter, speedySandBox) {\n  var _patchersInSandbox$sa;\n  var basePatchers = [function () {\n    return patchInterval(sandbox.proxy);\n  }, function () {\n    return patchWindowListener(sandbox.proxy);\n  }, function () {\n    return patchHistoryListener();\n  }];\n  var patchersInSandbox = _defineProperty(_defineProperty(_defineProperty({}, SandBoxType.LegacyProxy, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, true, scopedCSS, excludeAssetFilter);\n  }])), SandBoxType.Proxy, [].concat(basePatchers, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox, true, scopedCSS, excludeAssetFilter, speedySandBox);\n  }])), SandBoxType.Snapshot, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, true, scopedCSS, excludeAssetFilter);\n  }]));\n  return (_patchersInSandbox$sa = patchersInSandbox[sandbox.type]) === null || _patchersInSandbox$sa === void 0 ? void 0 : _patchersInSandbox$sa.map(function (patch) {\n    return patch();\n  });\n}\nexport function patchAtBootstrapping(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter, speedySandBox) {\n  var _patchersInSandbox$sa2;\n  var patchersInSandbox = _defineProperty(_defineProperty(_defineProperty({}, SandBoxType.LegacyProxy, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, false, scopedCSS, excludeAssetFilter);\n  }]), SandBoxType.Proxy, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox, false, scopedCSS, excludeAssetFilter, speedySandBox);\n  }]), SandBoxType.Snapshot, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, false, scopedCSS, excludeAssetFilter);\n  }]);\n  return (_patchersInSandbox$sa2 = patchersInSandbox[sandbox.type]) === null || _patchersInSandbox$sa2 === void 0 ? void 0 : _patchersInSandbox$sa2.map(function (patch) {\n    return patch();\n  });\n}\nexport { css };","map":{"version":3,"names":["_defineProperty","SandBoxType","css","patchLooseSandbox","patchStrictSandbox","patchHistoryListener","patchInterval","patchWindowListener","patchAtMounting","appName","elementGetter","sandbox","scopedCSS","excludeAssetFilter","speedySandBox","_patchersInSandbox$sa","basePatchers","proxy","patchersInSandbox","LegacyProxy","concat","Proxy","Snapshot","type","map","patch","patchAtBootstrapping","_patchersInSandbox$sa2"],"sources":["/home/lishu/桌面/Micro_frontend_practice/qiankun_micro/qiankun-base/node_modules/qiankun/es/sandbox/patchers/index.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n/**\n * @author Kuitos\n * @since 2019-04-11\n */\nimport { SandBoxType } from '../../interfaces';\nimport * as css from './css';\nimport { patchLooseSandbox, patchStrictSandbox } from './dynamicAppend';\nimport patchHistoryListener from './historyListener';\nimport patchInterval from './interval';\nimport patchWindowListener from './windowListener';\nexport function patchAtMounting(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter, speedySandBox) {\n  var _patchersInSandbox$sa;\n  var basePatchers = [function () {\n    return patchInterval(sandbox.proxy);\n  }, function () {\n    return patchWindowListener(sandbox.proxy);\n  }, function () {\n    return patchHistoryListener();\n  }];\n  var patchersInSandbox = _defineProperty(_defineProperty(_defineProperty({}, SandBoxType.LegacyProxy, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, true, scopedCSS, excludeAssetFilter);\n  }])), SandBoxType.Proxy, [].concat(basePatchers, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox, true, scopedCSS, excludeAssetFilter, speedySandBox);\n  }])), SandBoxType.Snapshot, [].concat(basePatchers, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, true, scopedCSS, excludeAssetFilter);\n  }]));\n  return (_patchersInSandbox$sa = patchersInSandbox[sandbox.type]) === null || _patchersInSandbox$sa === void 0 ? void 0 : _patchersInSandbox$sa.map(function (patch) {\n    return patch();\n  });\n}\nexport function patchAtBootstrapping(appName, elementGetter, sandbox, scopedCSS, excludeAssetFilter, speedySandBox) {\n  var _patchersInSandbox$sa2;\n  var patchersInSandbox = _defineProperty(_defineProperty(_defineProperty({}, SandBoxType.LegacyProxy, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, false, scopedCSS, excludeAssetFilter);\n  }]), SandBoxType.Proxy, [function () {\n    return patchStrictSandbox(appName, elementGetter, sandbox, false, scopedCSS, excludeAssetFilter, speedySandBox);\n  }]), SandBoxType.Snapshot, [function () {\n    return patchLooseSandbox(appName, elementGetter, sandbox, false, scopedCSS, excludeAssetFilter);\n  }]);\n  return (_patchersInSandbox$sa2 = patchersInSandbox[sandbox.type]) === null || _patchersInSandbox$sa2 === void 0 ? void 0 : _patchersInSandbox$sa2.map(function (patch) {\n    return patch();\n  });\n}\nexport { css };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}