{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _noop from \"lodash/noop\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"name\", \"activeRule\", \"loader\", \"props\"],\n  _excluded2 = [\"mount\"],\n  _excluded3 = [\"prefetch\", \"urlRerouteOnly\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { mountRootParcel, registerApplication, start as startSingleSpa } from 'single-spa';\nimport { loadApp } from './loader';\nimport { doPrefetchStrategy } from './prefetch';\nimport { Deferred, getContainerXPath, isConstDestructAssignmentSupported, toArray } from './utils';\nvar microApps = [];\nexport var frameworkConfiguration = {};\nvar started = false;\nvar defaultUrlRerouteOnly = true;\nvar frameworkStartedDefer = new Deferred();\nvar autoDowngradeForLowVersionBrowser = function autoDowngradeForLowVersionBrowser(configuration) {\n  var _configuration$sandbo = configuration.sandbox,\n    sandbox = _configuration$sandbo === void 0 ? true : _configuration$sandbo,\n    singular = configuration.singular;\n  if (sandbox) {\n    if (!window.Proxy) {\n      console.warn('[qiankun] Missing window.Proxy, proxySandbox will degenerate into snapshotSandbox');\n      if (singular === false) {\n        console.warn('[qiankun] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy');\n      }\n      return _objectSpread(_objectSpread({}, configuration), {}, {\n        sandbox: _typeof(sandbox) === 'object' ? _objectSpread(_objectSpread({}, sandbox), {}, {\n          loose: true\n        }) : {\n          loose: true\n        }\n      });\n    }\n    if (!isConstDestructAssignmentSupported() && (sandbox === true || _typeof(sandbox) === 'object' && sandbox.speedy !== false)) {\n      console.warn('[qiankun] Speedy mode will turn off as const destruct assignment not supported in current browser!');\n      return _objectSpread(_objectSpread({}, configuration), {}, {\n        sandbox: _typeof(sandbox) === 'object' ? _objectSpread(_objectSpread({}, sandbox), {}, {\n          speedy: false\n        }) : {\n          speedy: false\n        }\n      });\n    }\n  }\n  return configuration;\n};\nexport function registerMicroApps(apps, lifeCycles) {\n  // Each app only needs to be registered once\n  var unregisteredApps = apps.filter(function (app) {\n    return !microApps.some(function (registeredApp) {\n      return registeredApp.name === app.name;\n    });\n  });\n  microApps = [].concat(_toConsumableArray(microApps), _toConsumableArray(unregisteredApps));\n  unregisteredApps.forEach(function (app) {\n    var name = app.name,\n      activeRule = app.activeRule,\n      _app$loader = app.loader,\n      loader = _app$loader === void 0 ? _noop : _app$loader,\n      props = app.props,\n      appConfig = _objectWithoutProperties(app, _excluded);\n    registerApplication({\n      name: name,\n      app: function () {\n        var _app = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          var _yield$loadApp, mount, otherMicroAppConfigs;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                loader(true);\n                _context3.next = 3;\n                return frameworkStartedDefer.promise;\n              case 3:\n                _context3.next = 5;\n                return loadApp(_objectSpread({\n                  name: name,\n                  props: props\n                }, appConfig), frameworkConfiguration, lifeCycles);\n              case 5:\n                _context3.t0 = _context3.sent;\n                _yield$loadApp = (0, _context3.t0)();\n                mount = _yield$loadApp.mount;\n                otherMicroAppConfigs = _objectWithoutProperties(_yield$loadApp, _excluded2);\n                return _context3.abrupt(\"return\", _objectSpread({\n                  mount: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) switch (_context.prev = _context.next) {\n                        case 0:\n                          return _context.abrupt(\"return\", loader(true));\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }, _callee);\n                  }))].concat(_toConsumableArray(toArray(mount)), [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) switch (_context2.prev = _context2.next) {\n                        case 0:\n                          return _context2.abrupt(\"return\", loader(false));\n                        case 1:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }, _callee2);\n                  }))])\n                }, otherMicroAppConfigs));\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        function app() {\n          return _app.apply(this, arguments);\n        }\n        return app;\n      }(),\n      activeWhen: activeRule,\n      customProps: props\n    });\n  });\n}\nvar appConfigPromiseGetterMap = new Map();\nvar containerMicroAppsMap = new Map();\nexport function loadMicroApp(app, configuration, lifeCycles) {\n  var props = app.props,\n    name = app.name;\n  var container = 'container' in app ? app.container : undefined;\n  // Must compute the container xpath at beginning to keep it consist around app running\n  // If we compute it every time, the container dom structure most probably been changed and result in a different xpath value\n  var containerXPath = getContainerXPath(container);\n  var appContainerXPathKey = \"\".concat(name, \"-\").concat(containerXPath);\n  var microApp;\n  var wrapParcelConfigForRemount = function wrapParcelConfigForRemount(config) {\n    var microAppConfig = config;\n    if (container) {\n      if (containerXPath) {\n        var containerMicroApps = containerMicroAppsMap.get(appContainerXPathKey);\n        if (containerMicroApps === null || containerMicroApps === void 0 ? void 0 : containerMicroApps.length) {\n          var mount = [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n            var prevLoadMicroApps, prevLoadMicroAppsWhichNotBroken;\n            return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n              while (1) switch (_context4.prev = _context4.next) {\n                case 0:\n                  // While there are multiple micro apps mounted on the same container, we must wait until the prev instances all had unmounted\n                  // Otherwise it will lead some concurrent issues\n                  prevLoadMicroApps = containerMicroApps.slice(0, containerMicroApps.indexOf(microApp));\n                  prevLoadMicroAppsWhichNotBroken = prevLoadMicroApps.filter(function (v) {\n                    return v.getStatus() !== 'LOAD_ERROR' && v.getStatus() !== 'SKIP_BECAUSE_BROKEN';\n                  });\n                  _context4.next = 4;\n                  return Promise.all(prevLoadMicroAppsWhichNotBroken.map(function (v) {\n                    return v.unmountPromise;\n                  }));\n                case 4:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }, _callee4);\n          }))].concat(_toConsumableArray(toArray(microAppConfig.mount)));\n          microAppConfig = _objectSpread(_objectSpread({}, config), {}, {\n            mount: mount\n          });\n        }\n      }\n    }\n    return _objectSpread(_objectSpread({}, microAppConfig), {}, {\n      // empty bootstrap hook which should not run twice while it calling from cached micro app\n      bootstrap: function bootstrap() {\n        return Promise.resolve();\n      }\n    });\n  };\n  /**\n   * using name + container xpath as the micro app instance id,\n   * it means if you rendering a micro app to a dom which have been rendered before,\n   * the micro app would not load and evaluate its lifecycles again\n   */\n  var memorizedLoadingFn = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var userConfiguration, $$cacheLifecycleByAppName, parcelConfigGetterPromise, _parcelConfigGetterPromise, parcelConfigObjectGetterPromise;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            userConfiguration = autoDowngradeForLowVersionBrowser(configuration !== null && configuration !== void 0 ? configuration : _objectSpread(_objectSpread({}, frameworkConfiguration), {}, {\n              singular: false\n            }));\n            $$cacheLifecycleByAppName = userConfiguration.$$cacheLifecycleByAppName;\n            if (!container) {\n              _context5.next = 21;\n              break;\n            }\n            if (!$$cacheLifecycleByAppName) {\n              _context5.next = 12;\n              break;\n            }\n            parcelConfigGetterPromise = appConfigPromiseGetterMap.get(name);\n            if (!parcelConfigGetterPromise) {\n              _context5.next = 12;\n              break;\n            }\n            _context5.t0 = wrapParcelConfigForRemount;\n            _context5.next = 9;\n            return parcelConfigGetterPromise;\n          case 9:\n            _context5.t1 = _context5.sent;\n            _context5.t2 = (0, _context5.t1)(container);\n            return _context5.abrupt(\"return\", (0, _context5.t0)(_context5.t2));\n          case 12:\n            if (!containerXPath) {\n              _context5.next = 21;\n              break;\n            }\n            _parcelConfigGetterPromise = appConfigPromiseGetterMap.get(appContainerXPathKey);\n            if (!_parcelConfigGetterPromise) {\n              _context5.next = 21;\n              break;\n            }\n            _context5.t3 = wrapParcelConfigForRemount;\n            _context5.next = 18;\n            return _parcelConfigGetterPromise;\n          case 18:\n            _context5.t4 = _context5.sent;\n            _context5.t5 = (0, _context5.t4)(container);\n            return _context5.abrupt(\"return\", (0, _context5.t3)(_context5.t5));\n          case 21:\n            parcelConfigObjectGetterPromise = loadApp(app, userConfiguration, lifeCycles);\n            if (container) {\n              if ($$cacheLifecycleByAppName) {\n                appConfigPromiseGetterMap.set(name, parcelConfigObjectGetterPromise);\n              } else if (containerXPath) appConfigPromiseGetterMap.set(appContainerXPathKey, parcelConfigObjectGetterPromise);\n            }\n            _context5.next = 25;\n            return parcelConfigObjectGetterPromise;\n          case 25:\n            _context5.t6 = _context5.sent;\n            return _context5.abrupt(\"return\", (0, _context5.t6)(container));\n          case 27:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }));\n    return function memorizedLoadingFn() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  if (!started && (configuration === null || configuration === void 0 ? void 0 : configuration.autoStart) !== false) {\n    var _frameworkConfigurati;\n    // We need to invoke start method of single-spa as the popstate event should be dispatched while the main app calling pushState/replaceState automatically,\n    // but in single-spa it will check the start status before it dispatch popstate\n    // see https://github.com/single-spa/single-spa/blob/f28b5963be1484583a072c8145ac0b5a28d91235/src/navigation/navigation-events.js#L101\n    // ref https://github.com/umijs/qiankun/pull/1071\n    startSingleSpa({\n      urlRerouteOnly: (_frameworkConfigurati = frameworkConfiguration.urlRerouteOnly) !== null && _frameworkConfigurati !== void 0 ? _frameworkConfigurati : defaultUrlRerouteOnly\n    });\n  }\n  microApp = mountRootParcel(memorizedLoadingFn, _objectSpread({\n    domElement: document.createElement('div')\n  }, props));\n  if (container) {\n    if (containerXPath) {\n      // Store the microApps which they mounted on the same container\n      var microAppsRef = containerMicroAppsMap.get(appContainerXPathKey) || [];\n      microAppsRef.push(microApp);\n      containerMicroAppsMap.set(appContainerXPathKey, microAppsRef);\n      var cleanup = function cleanup() {\n        var index = microAppsRef.indexOf(microApp);\n        microAppsRef.splice(index, 1);\n        // @ts-ignore\n        microApp = null;\n      };\n      // gc after unmount\n      microApp.unmountPromise.then(cleanup).catch(cleanup);\n    }\n  }\n  return microApp;\n}\nexport function start() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  frameworkConfiguration = _objectSpread({\n    prefetch: true,\n    singular: true,\n    sandbox: true\n  }, opts);\n  var _frameworkConfigurati2 = frameworkConfiguration,\n    prefetch = _frameworkConfigurati2.prefetch,\n    _frameworkConfigurati3 = _frameworkConfigurati2.urlRerouteOnly,\n    urlRerouteOnly = _frameworkConfigurati3 === void 0 ? defaultUrlRerouteOnly : _frameworkConfigurati3,\n    importEntryOpts = _objectWithoutProperties(_frameworkConfigurati2, _excluded3);\n  if (prefetch) {\n    doPrefetchStrategy(microApps, prefetch, importEntryOpts);\n  }\n  frameworkConfiguration = autoDowngradeForLowVersionBrowser(frameworkConfiguration);\n  startSingleSpa({\n    urlRerouteOnly: urlRerouteOnly\n  });\n  started = true;\n  frameworkStartedDefer.resolve();\n}","map":{"version":3,"names":["_asyncToGenerator","_noop","_objectWithoutProperties","_toConsumableArray","_typeof","_objectSpread","_excluded","_excluded2","_excluded3","_regeneratorRuntime","mountRootParcel","registerApplication","start","startSingleSpa","loadApp","doPrefetchStrategy","Deferred","getContainerXPath","isConstDestructAssignmentSupported","toArray","microApps","frameworkConfiguration","started","defaultUrlRerouteOnly","frameworkStartedDefer","autoDowngradeForLowVersionBrowser","configuration","_configuration$sandbo","sandbox","singular","window","Proxy","console","warn","loose","speedy","registerMicroApps","apps","lifeCycles","unregisteredApps","filter","app","some","registeredApp","name","concat","forEach","activeRule","_app$loader","loader","props","appConfig","_app","mark","_callee3","_yield$loadApp","mount","otherMicroAppConfigs","wrap","_callee3$","_context3","prev","next","promise","t0","sent","abrupt","_callee","_callee$","_context","stop","_callee2","_callee2$","_context2","apply","arguments","activeWhen","customProps","appConfigPromiseGetterMap","Map","containerMicroAppsMap","loadMicroApp","container","undefined","containerXPath","appContainerXPathKey","microApp","wrapParcelConfigForRemount","config","microAppConfig","containerMicroApps","get","length","_callee4","prevLoadMicroApps","prevLoadMicroAppsWhichNotBroken","_callee4$","_context4","slice","indexOf","v","getStatus","Promise","all","map","unmountPromise","bootstrap","resolve","memorizedLoadingFn","_ref4","_callee5","userConfiguration","$$cacheLifecycleByAppName","parcelConfigGetterPromise","_parcelConfigGetterPromise","parcelConfigObjectGetterPromise","_callee5$","_context5","t1","t2","t3","t4","t5","set","t6","autoStart","_frameworkConfigurati","urlRerouteOnly","domElement","document","createElement","microAppsRef","push","cleanup","index","splice","then","catch","opts","prefetch","_frameworkConfigurati2","_frameworkConfigurati3","importEntryOpts"],"sources":["/home/lishu/桌面/Micro_frontend_practice/qiankun_micro/qiankun-base/node_modules/qiankun/es/apis.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _noop from \"lodash/noop\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nvar _excluded = [\"name\", \"activeRule\", \"loader\", \"props\"],\n  _excluded2 = [\"mount\"],\n  _excluded3 = [\"prefetch\", \"urlRerouteOnly\"];\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { mountRootParcel, registerApplication, start as startSingleSpa } from 'single-spa';\nimport { loadApp } from './loader';\nimport { doPrefetchStrategy } from './prefetch';\nimport { Deferred, getContainerXPath, isConstDestructAssignmentSupported, toArray } from './utils';\nvar microApps = [];\nexport var frameworkConfiguration = {};\nvar started = false;\nvar defaultUrlRerouteOnly = true;\nvar frameworkStartedDefer = new Deferred();\nvar autoDowngradeForLowVersionBrowser = function autoDowngradeForLowVersionBrowser(configuration) {\n  var _configuration$sandbo = configuration.sandbox,\n    sandbox = _configuration$sandbo === void 0 ? true : _configuration$sandbo,\n    singular = configuration.singular;\n  if (sandbox) {\n    if (!window.Proxy) {\n      console.warn('[qiankun] Missing window.Proxy, proxySandbox will degenerate into snapshotSandbox');\n      if (singular === false) {\n        console.warn('[qiankun] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy');\n      }\n      return _objectSpread(_objectSpread({}, configuration), {}, {\n        sandbox: _typeof(sandbox) === 'object' ? _objectSpread(_objectSpread({}, sandbox), {}, {\n          loose: true\n        }) : {\n          loose: true\n        }\n      });\n    }\n    if (!isConstDestructAssignmentSupported() && (sandbox === true || _typeof(sandbox) === 'object' && sandbox.speedy !== false)) {\n      console.warn('[qiankun] Speedy mode will turn off as const destruct assignment not supported in current browser!');\n      return _objectSpread(_objectSpread({}, configuration), {}, {\n        sandbox: _typeof(sandbox) === 'object' ? _objectSpread(_objectSpread({}, sandbox), {}, {\n          speedy: false\n        }) : {\n          speedy: false\n        }\n      });\n    }\n  }\n  return configuration;\n};\nexport function registerMicroApps(apps, lifeCycles) {\n  // Each app only needs to be registered once\n  var unregisteredApps = apps.filter(function (app) {\n    return !microApps.some(function (registeredApp) {\n      return registeredApp.name === app.name;\n    });\n  });\n  microApps = [].concat(_toConsumableArray(microApps), _toConsumableArray(unregisteredApps));\n  unregisteredApps.forEach(function (app) {\n    var name = app.name,\n      activeRule = app.activeRule,\n      _app$loader = app.loader,\n      loader = _app$loader === void 0 ? _noop : _app$loader,\n      props = app.props,\n      appConfig = _objectWithoutProperties(app, _excluded);\n    registerApplication({\n      name: name,\n      app: function () {\n        var _app = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          var _yield$loadApp, mount, otherMicroAppConfigs;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) switch (_context3.prev = _context3.next) {\n              case 0:\n                loader(true);\n                _context3.next = 3;\n                return frameworkStartedDefer.promise;\n              case 3:\n                _context3.next = 5;\n                return loadApp(_objectSpread({\n                  name: name,\n                  props: props\n                }, appConfig), frameworkConfiguration, lifeCycles);\n              case 5:\n                _context3.t0 = _context3.sent;\n                _yield$loadApp = (0, _context3.t0)();\n                mount = _yield$loadApp.mount;\n                otherMicroAppConfigs = _objectWithoutProperties(_yield$loadApp, _excluded2);\n                return _context3.abrupt(\"return\", _objectSpread({\n                  mount: [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) switch (_context.prev = _context.next) {\n                        case 0:\n                          return _context.abrupt(\"return\", loader(true));\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }, _callee);\n                  }))].concat(_toConsumableArray(toArray(mount)), [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) switch (_context2.prev = _context2.next) {\n                        case 0:\n                          return _context2.abrupt(\"return\", loader(false));\n                        case 1:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }, _callee2);\n                  }))])\n                }, otherMicroAppConfigs));\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }, _callee3);\n        }));\n        function app() {\n          return _app.apply(this, arguments);\n        }\n        return app;\n      }(),\n      activeWhen: activeRule,\n      customProps: props\n    });\n  });\n}\nvar appConfigPromiseGetterMap = new Map();\nvar containerMicroAppsMap = new Map();\nexport function loadMicroApp(app, configuration, lifeCycles) {\n  var props = app.props,\n    name = app.name;\n  var container = 'container' in app ? app.container : undefined;\n  // Must compute the container xpath at beginning to keep it consist around app running\n  // If we compute it every time, the container dom structure most probably been changed and result in a different xpath value\n  var containerXPath = getContainerXPath(container);\n  var appContainerXPathKey = \"\".concat(name, \"-\").concat(containerXPath);\n  var microApp;\n  var wrapParcelConfigForRemount = function wrapParcelConfigForRemount(config) {\n    var microAppConfig = config;\n    if (container) {\n      if (containerXPath) {\n        var containerMicroApps = containerMicroAppsMap.get(appContainerXPathKey);\n        if (containerMicroApps === null || containerMicroApps === void 0 ? void 0 : containerMicroApps.length) {\n          var mount = [/*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n            var prevLoadMicroApps, prevLoadMicroAppsWhichNotBroken;\n            return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n              while (1) switch (_context4.prev = _context4.next) {\n                case 0:\n                  // While there are multiple micro apps mounted on the same container, we must wait until the prev instances all had unmounted\n                  // Otherwise it will lead some concurrent issues\n                  prevLoadMicroApps = containerMicroApps.slice(0, containerMicroApps.indexOf(microApp));\n                  prevLoadMicroAppsWhichNotBroken = prevLoadMicroApps.filter(function (v) {\n                    return v.getStatus() !== 'LOAD_ERROR' && v.getStatus() !== 'SKIP_BECAUSE_BROKEN';\n                  });\n                  _context4.next = 4;\n                  return Promise.all(prevLoadMicroAppsWhichNotBroken.map(function (v) {\n                    return v.unmountPromise;\n                  }));\n                case 4:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }, _callee4);\n          }))].concat(_toConsumableArray(toArray(microAppConfig.mount)));\n          microAppConfig = _objectSpread(_objectSpread({}, config), {}, {\n            mount: mount\n          });\n        }\n      }\n    }\n    return _objectSpread(_objectSpread({}, microAppConfig), {}, {\n      // empty bootstrap hook which should not run twice while it calling from cached micro app\n      bootstrap: function bootstrap() {\n        return Promise.resolve();\n      }\n    });\n  };\n  /**\n   * using name + container xpath as the micro app instance id,\n   * it means if you rendering a micro app to a dom which have been rendered before,\n   * the micro app would not load and evaluate its lifecycles again\n   */\n  var memorizedLoadingFn = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var userConfiguration, $$cacheLifecycleByAppName, parcelConfigGetterPromise, _parcelConfigGetterPromise, parcelConfigObjectGetterPromise;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            userConfiguration = autoDowngradeForLowVersionBrowser(configuration !== null && configuration !== void 0 ? configuration : _objectSpread(_objectSpread({}, frameworkConfiguration), {}, {\n              singular: false\n            }));\n            $$cacheLifecycleByAppName = userConfiguration.$$cacheLifecycleByAppName;\n            if (!container) {\n              _context5.next = 21;\n              break;\n            }\n            if (!$$cacheLifecycleByAppName) {\n              _context5.next = 12;\n              break;\n            }\n            parcelConfigGetterPromise = appConfigPromiseGetterMap.get(name);\n            if (!parcelConfigGetterPromise) {\n              _context5.next = 12;\n              break;\n            }\n            _context5.t0 = wrapParcelConfigForRemount;\n            _context5.next = 9;\n            return parcelConfigGetterPromise;\n          case 9:\n            _context5.t1 = _context5.sent;\n            _context5.t2 = (0, _context5.t1)(container);\n            return _context5.abrupt(\"return\", (0, _context5.t0)(_context5.t2));\n          case 12:\n            if (!containerXPath) {\n              _context5.next = 21;\n              break;\n            }\n            _parcelConfigGetterPromise = appConfigPromiseGetterMap.get(appContainerXPathKey);\n            if (!_parcelConfigGetterPromise) {\n              _context5.next = 21;\n              break;\n            }\n            _context5.t3 = wrapParcelConfigForRemount;\n            _context5.next = 18;\n            return _parcelConfigGetterPromise;\n          case 18:\n            _context5.t4 = _context5.sent;\n            _context5.t5 = (0, _context5.t4)(container);\n            return _context5.abrupt(\"return\", (0, _context5.t3)(_context5.t5));\n          case 21:\n            parcelConfigObjectGetterPromise = loadApp(app, userConfiguration, lifeCycles);\n            if (container) {\n              if ($$cacheLifecycleByAppName) {\n                appConfigPromiseGetterMap.set(name, parcelConfigObjectGetterPromise);\n              } else if (containerXPath) appConfigPromiseGetterMap.set(appContainerXPathKey, parcelConfigObjectGetterPromise);\n            }\n            _context5.next = 25;\n            return parcelConfigObjectGetterPromise;\n          case 25:\n            _context5.t6 = _context5.sent;\n            return _context5.abrupt(\"return\", (0, _context5.t6)(container));\n          case 27:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }));\n    return function memorizedLoadingFn() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  if (!started && (configuration === null || configuration === void 0 ? void 0 : configuration.autoStart) !== false) {\n    var _frameworkConfigurati;\n    // We need to invoke start method of single-spa as the popstate event should be dispatched while the main app calling pushState/replaceState automatically,\n    // but in single-spa it will check the start status before it dispatch popstate\n    // see https://github.com/single-spa/single-spa/blob/f28b5963be1484583a072c8145ac0b5a28d91235/src/navigation/navigation-events.js#L101\n    // ref https://github.com/umijs/qiankun/pull/1071\n    startSingleSpa({\n      urlRerouteOnly: (_frameworkConfigurati = frameworkConfiguration.urlRerouteOnly) !== null && _frameworkConfigurati !== void 0 ? _frameworkConfigurati : defaultUrlRerouteOnly\n    });\n  }\n  microApp = mountRootParcel(memorizedLoadingFn, _objectSpread({\n    domElement: document.createElement('div')\n  }, props));\n  if (container) {\n    if (containerXPath) {\n      // Store the microApps which they mounted on the same container\n      var microAppsRef = containerMicroAppsMap.get(appContainerXPathKey) || [];\n      microAppsRef.push(microApp);\n      containerMicroAppsMap.set(appContainerXPathKey, microAppsRef);\n      var cleanup = function cleanup() {\n        var index = microAppsRef.indexOf(microApp);\n        microAppsRef.splice(index, 1);\n        // @ts-ignore\n        microApp = null;\n      };\n      // gc after unmount\n      microApp.unmountPromise.then(cleanup).catch(cleanup);\n    }\n  }\n  return microApp;\n}\nexport function start() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  frameworkConfiguration = _objectSpread({\n    prefetch: true,\n    singular: true,\n    sandbox: true\n  }, opts);\n  var _frameworkConfigurati2 = frameworkConfiguration,\n    prefetch = _frameworkConfigurati2.prefetch,\n    _frameworkConfigurati3 = _frameworkConfigurati2.urlRerouteOnly,\n    urlRerouteOnly = _frameworkConfigurati3 === void 0 ? defaultUrlRerouteOnly : _frameworkConfigurati3,\n    importEntryOpts = _objectWithoutProperties(_frameworkConfigurati2, _excluded3);\n  if (prefetch) {\n    doPrefetchStrategy(microApps, prefetch, importEntryOpts);\n  }\n  frameworkConfiguration = autoDowngradeForLowVersionBrowser(frameworkConfiguration);\n  startSingleSpa({\n    urlRerouteOnly: urlRerouteOnly\n  });\n  started = true;\n  frameworkStartedDefer.resolve();\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}